# SensorBox 通信协议

标签（空格分隔）： 技术

---
## 通信协议设置
单片机作为TCP服务器，PC作为TCP客户端。

TCP服务器地址：192.168.1.30:7

PC请修改本地连接地址为：192.168.1.11

PC向单片机**发送命令**，使用**TCP协议**
单片机向PC**发送数据**，使用**UDP协议**

## 通信频率
2s发送一次数据

## 通信协议
### 命令
1. set_init:初始化电机，此时电机不会运行
2. set_speed [arg] :设置电机运行速度，参数为0-99，使用此命令前需先初始化电机

服务器接收到命令会返回'ok!'作为回馈

### 数据格式

1. 一段数据以**start|** 为起始标志，以  **|stop**为结束标志
2. 举例如下：
start|a_x:5.12|a_y:4.83|a_z:0.51|g_x:0.12312|g_y:1.321|gz:2.2|m_x:1.2|m_y:1.3|m_z:1.4|r:1.5|p:1.6|c1:1.7|c2:1.8|c3:1.9|t:20|h:30|s:43.2|w:455|v:11333|stop

### 字段含义
1. ac_x|ac_y|ac_z:XYZ三轴的加速度,单位：m/(s^2)
2. m_x|m_y|m_z:XYZ三轴的磁场强度,单位：uT
3. g_x|g_y|g_z:XYZ三轴的角速度,单位：°/s
4. r:横滚角(roll)，单位：°
5. p:俯仰角(pitch)，单位：°
6. c1|c2|c3:电机的三相电流(current)，单位:A
7. t:温度(temperture)，单位：℃
8. h:湿度(humidity)，无单位，百分比
9. s:速度(speed)，单位:r/s
10. w:声音强度(wave)，无单位
11. v:电压(voltage),单位：mV









