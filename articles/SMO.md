# 无感FOC滑膜观测器学习
ctime:2020-02-04 20:40:32 +0900|1580816432

标签（空格分隔）： 技术 硬件
---

目标是要通过滑膜观测器来获取电机转子位置

根据电机的数学模型，只要得到A B 相的反电动势即可算出位置

而可以较为简单获取的参数只有相电压(UA UB UC)和相电流(IA IB IC)

我一开始有一个疑问，既然要AB相的反电动势，那么我采出三相的反电动势，在做一个3->2的克拉克变换不就可以得到AB相的反电动势了么？
这个想法实际上是受以前做BLDC6步换向影响，当时6步换向是采集没有导通的相的反电动势，检测是否过零。

但现在在SVPWM中，三相是都导通着，并没有不导通的相，所以并不能检测到三相的反电动势，只能测出相电压。

好了，这是一个小插曲。有了相电压之后，我们还得采样相电流，相电流作何用途等下再讲。

![此处输入图片的描述][1]

通过电机模型，我们有了相电压之后，就可以估算反电动势$e^S$。从图中我们可以看到，要估算反电动势，还要一个$i^s$。这是电流的估算值。
这个电流估算值是滑膜控制器的输出，我们通过每次比较这个电流估算值和实际电流值的差，乘以增益之后，反馈补偿到原来的$i^s$中。这样最终
电流的估算值与实际值就几乎相等了。

这个电流估算值相对准确后，且相电压也相对准确，我们就可以算出较为准确的反电动势。

反电动势的公式为：$e^S=w*\phi$
其中，$\phi$ 分为alpha相的磁链和beta相的磁链，需要各自乘以cos和sin

得到两相的反电动势之后，进行反正切运算，就可以得到theta了。


[1]: https://raw.githubusercontent.com/Ncerzzk/MyBlog/master/img/smo.png